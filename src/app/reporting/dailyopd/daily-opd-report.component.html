<div class="report-container">
  <!-- Page Title -->
  <div class="page-title">
    <h2>Daily Pathology Report</h2>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <div class="date-inputs">
      <div class="date-field">
        <input type="date" [(ngModel)]="selectedDate" name="selectedDate" id="selectedDate" placeholder="dd/mm/yyyy">
      </div>
    </div>
    <div class="action-buttons">
      <button class="download-btn" (click)="downloadReport()">Download</button>
      <button class="search-btn" (click)="generateReport()">Search</button>
      <button class="print-btn" (click)="printReport()">Print</button>
    </div>
  </div>

  <!-- Report Content -->
  <div class="report-content" *ngIf="reportData">
    <div class="report-header">
      <div class="logo-container">
        <img [src]="defaultLabConfig.getLabLogo(labSettings?.logoDataUrl)" alt="Lab Logo" class="logo" loading="eager">
      </div>
      <div class="header-text">
        <h1>{{ defaultLabConfig.getLabName(labSettings?.labName) }}</h1>
        <h2>{{ defaultLabConfig.getLabAddress(labSettings?.addressLine1 || labSettings?.city) }}</h2>
        <h3>Daily Pathology Report : {{getFormattedDate()}}</h3>
      </div>
    </div>



    <!-- Test Category-wise Report Table -->
    <div class="report-table">
      <table>
        <thead>
          <tr>
            <th>Test Category</th>
            <th>Total Tests</th>
            <th>Total Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of displayRows" [hidden]="row.isTotal">
            <td>{{row.name}}</td>
            <td>{{row.totalTests}}</td>
            <td>₹{{row.totalAmount | number:'1.2-2'}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr class="total-row">
            <td>Total</td>
            <td>{{reportData.totalTests || 0}}</td>
            <td>₹{{reportData.totalAmount || 0 | number:'1.2-2'}}</td>
          </tr>
        </tfoot>
      </table>
    </div>

      <!-- Signature Footer -->
      <div class="signature-footer">
        <div class="sig-left">
          <div class="line"></div>
          <div class="label">Department Signature</div>

          <div class="small">Designation ______________</div>
        </div>
        <div class="sig-right">
          <div class="line"></div>
          <div class="label">Senior Medical Officer</div>
        </div>
      </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <p>Loading report data...</p>
  </div>

  <!-- No Data State -->
  <div class="no-data-container" *ngIf="!reportData && !isLoading">
    <p>No report data available. Please select a date and click Search.</p>
  </div>
</div>
